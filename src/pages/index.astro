---
import Layout from '../layouts/Layout.astro';
import AnimatedBackground from '../components/AnimatedBackground.astro';
import ImpactCalculator from '../components/ImpactCalculator.astro';
import LiveProjects from '../components/LiveProjects.astro';
---

<Layout title="Open Earth - Crowdsourced City Rebuilding">
	<AnimatedBackground />
	<main>
		<div class="hero">
			<div class="hero-background"></div>
			<div class="hero-content">
				<img src="/logo.svg" alt="Open Earth Logo" class="logo" />
				<h1 class="title">Open Earth</h1>
				<p class="tagline">
					Crowdsourced problem-solving for cities in need
				</p>
			</div>
		</div>

		<section class="vision">
			<h2>Our Vision</h2>
			<p class="large">
				A global platform where people contribute <strong>skills, funding, and expertise</strong> 
				to rebuild cities and solve real challenges.
			</p>
		</section>

		<section class="how-it-works">
			<h2>How It Works</h2>
			<div class="steps">
				<div class="step">
					<div class="step-number">1</div>
					<h3>Identify Problems</h3>
					<p>Local communities identify concrete challenges</p>
				</div>
				<div class="step">
					<div class="step-number">2</div>
					<h3>Propose Solutions</h3>
					<p>Multiple buildable solutions with costs & timelines</p>
				</div>
				<div class="step">
					<div class="step-number">3</div>
					<h3>Community Support</h3>
					<p>Vote, pledge money, offer skills or equipment</p>
				</div>
				<div class="step">
					<div class="step-number">4</div>
					<h3>Build Together</h3>
					<p>Transparent execution with public tracking</p>
				</div>
			</div>
		</section>

		<ImpactCalculator />

		<LiveProjects />

		<section class="pilot">
			<h2>Pilot City: Shiraz, Iran</h2>
			<p class="large">
				We're starting with <strong>Shiraz</strong> ‚Äî a city facing 30 critical challenges 
				in water, infrastructure, economy, health, and culture.
			</p>
			<a href="/shiraz-full" class="cta-button">
				Explore Shiraz Challenges ‚Üí
			</a>
		</section>

		<section class="features">
			<h2>Platform Features</h2>
			<div class="feature-grid">
				<div class="feature">
					<div class="icon">üí∞</div>
					<h3>Kickstarter-style Funding</h3>
					<p>Pledge money with escrow protection</p>
				</div>
				<div class="feature">
					<div class="icon">üõ†Ô∏è</div>
					<h3>Skill Matching</h3>
					<p>Connect experts with projects</p>
				</div>
				<div class="feature">
					<div class="icon">üì¶</div>
					<h3>Equipment Pledges</h3>
					<p>Donate tools, materials, machinery</p>
				</div>
				<div class="feature">
					<div class="icon">üó≥Ô∏è</div>
					<h3>Community Voting</h3>
					<p>Projects need support to become "ready to start"</p>
				</div>
				<div class="feature">
					<div class="icon">üìä</div>
					<h3>Transparent Tracking</h3>
					<p>Public progress updates & fund allocation</p>
				</div>
				<div class="feature">
					<div class="icon">üåç</div>
					<h3>Global & Local</h3>
					<p>Start with one city, scale worldwide</p>
				</div>
			</div>
		</section>

		<section class="principles">
			<h2>Core Principles</h2>
			<ul class="principle-list">
				<li>
					<strong>Non-political:</strong> Focus on buildable solutions, not ideology
				</li>
				<li>
					<strong>Universal:</strong> Open to all people, all cities, all problems
				</li>
				<li>
					<strong>Transparent:</strong> Every pledge, every decision, publicly visible
				</li>
				<li>
					<strong>Concrete:</strong> Real infrastructure, technology, engineering
				</li>
			</ul>
		</section>

		<section class="cta">
			<h2>Join the Movement</h2>
			<p class="large">
				Help us build the platform that rebuilds cities.
			</p>
			<div class="cta-buttons">
				<a href="/shiraz-full" class="cta-button primary">
					View Shiraz Challenges
				</a>
				<a href="https://github.com/openearth" class="cta-button secondary">
					Contribute on GitHub
				</a>
			</div>
		</section>
	</main>
</Layout>

<style>
	:global(body) {
		background: #0a0e27;
		color: #e0e0e0;
		scroll-behavior: smooth;
	}

	:global(*)::selection {
		background: #667eea;
		color: white;
	}

	main {
		margin: 0 auto;
		padding: 2rem;
		max-width: 1200px;
		font-family: system-ui, sans-serif;
		line-height: 1.6;
	}

	.hero {
		position: relative;
		text-align: center;
		padding: 6rem 2rem;
		border-radius: 16px;
		margin-bottom: 3rem;
		overflow: hidden;
		min-height: 70vh;
		display: flex;
		align-items: center;
		justify-content: center;
	}

	.hero-background {
		position: absolute;
		inset: 0;
		background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
		animation: gradientShift 15s ease infinite;
		z-index: 0;
	}

	@keyframes gradientShift {
		0%, 100% { transform: scale(1) rotate(0deg); }
		50% { transform: scale(1.1) rotate(5deg); }
	}

	.hero-content {
		position: relative;
		z-index: 1;
		color: white;
	}

	.logo {
		width: 120px;
		height: 120px;
		margin: 0 auto 2rem;
		animation: float 3s ease-in-out infinite;
		filter: drop-shadow(0 10px 30px rgba(0,0,0,0.3));
	}

	@keyframes float {
		0%, 100% { transform: translateY(0px); }
		50% { transform: translateY(-10px); }
	}

	.title {
		font-size: 4.5rem;
		margin: 0;
		font-weight: 900;
		line-height: 1.2;
		text-shadow: 0 4px 20px rgba(0,0,0,0.3);
		animation: fadeInUp 1s ease-out;
	}

	.tagline {
		font-size: 1.5rem;
		margin-top: 1rem;
		opacity: 0.95;
		text-shadow: 0 2px 10px rgba(0,0,0,0.2);
		animation: fadeInUp 1.2s ease-out;
	}

	@keyframes fadeInUp {
		from {
			opacity: 0;
			transform: translateY(30px);
		}
		to {
			opacity: 1;
			transform: translateY(0);
		}
	}

	section {
		margin: 4rem 0;
	}

	h2 {
		font-size: 2.5rem;
		color: #667eea;
		margin-bottom: 2rem;
		text-align: center;
	}

	.large {
		font-size: 1.3rem;
		line-height: 1.8;
		text-align: center;
		max-width: 800px;
		margin: 1rem auto;
	}

	.steps {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
		gap: 2rem;
		margin-top: 3rem;
	}

	.step {
		background: rgba(26, 31, 58, 0.8);
		backdrop-filter: blur(10px);
		border: 2px solid rgba(102, 126, 234, 0.5);
		border-radius: 12px;
		padding: 2rem;
		text-align: center;
		transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
	}

	.step:hover {
		transform: translateY(-8px) scale(1.02);
		box-shadow: 0 15px 40px rgba(102, 126, 234, 0.4);
		border-color: #667eea;
		background: rgba(102, 126, 234, 0.1);
	}

	.step-number {
		width: 50px;
		height: 50px;
		background: #667eea;
		color: white;
		border-radius: 50%;
		display: flex;
		align-items: center;
		justify-content: center;
		font-size: 1.5rem;
		font-weight: bold;
		margin: 0 auto 1rem;
	}

	.step h3 {
		font-size: 1.5rem;
		margin-bottom: 0.5rem;
		color: #ffffff;
	}

	.pilot {
		background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
		color: white;
		padding: 3rem;
		border-radius: 16px;
		text-align: center;
	}

	.pilot h2 {
		color: white;
	}

	.cta-button {
		display: inline-block;
		background: white;
		color: #f5576c;
		padding: 1rem 2rem;
		border-radius: 50px;
		text-decoration: none;
		font-weight: bold;
		font-size: 1.2rem;
		margin-top: 2rem;
		transition: transform 0.3s, box-shadow 0.3s;
	}

	.cta-button:hover {
		transform: scale(1.05);
		box-shadow: 0 10px 30px rgba(0,0,0,0.2);
	}

	.feature-grid {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
		gap: 2rem;
	}

	.feature {
		background: rgba(26, 31, 58, 0.6);
		backdrop-filter: blur(10px);
		border: 1px solid rgba(102, 126, 234, 0.3);
		padding: 2rem;
		border-radius: 12px;
		text-align: center;
		transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
	}

	.feature:hover {
		transform: translateY(-5px);
		border-color: #667eea;
		box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
	}

	.icon {
		font-size: 3rem;
		margin-bottom: 1rem;
		display: inline-block;
		transition: transform 0.3s;
	}

	.feature:hover .icon {
		transform: scale(1.2) rotate(5deg);
	}

	.feature h3 {
		font-size: 1.3rem;
		color: #ffffff;
		margin-bottom: 0.5rem;
	}

	.principle-list {
		max-width: 800px;
		margin: 0 auto;
		list-style: none;
		padding: 0;
	}

	.principle-list li {
		background: rgba(26, 31, 58, 0.6);
		backdrop-filter: blur(10px);
		border-left: 5px solid #667eea;
		padding: 1.5rem;
		margin-bottom: 1rem;
		border-radius: 8px;
		box-shadow: 0 2px 10px rgba(0,0,0,0.3);
		transition: all 0.3s;
	}

	.principle-list li:hover {
		transform: translateX(10px);
		box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
		border-left-width: 8px;
	}

	.principle-list strong {
		color: #667eea;
		font-size: 1.2rem;
	}

	.cta {
		text-align: center;
		padding: 4rem 2rem;
		background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
		color: white;
		border-radius: 16px;
	}

	.cta h2 {
		color: white;
	}

	.cta-buttons {
		display: flex;
		gap: 1rem;
		justify-content: center;
		flex-wrap: wrap;
		margin-top: 2rem;
	}

	.cta-button.primary {
		background: white;
		color: #667eea;
	}

	.cta-button.secondary {
		background: transparent;
		border: 2px solid white;
		color: white;
	}

	.cta-button.secondary:hover {
		background: white;
		color: #667eea;
	}
</style>

<script>
// Parallax scrolling effect
window.addEventListener('scroll', () => {
	const scrolled = window.pageYOffset;
	const parallaxElements = document.querySelectorAll('.hero-content');
	
	parallaxElements.forEach(el => {
		const speed = 0.5;
		el.style.transform = `translateY(${scrolled * speed}px)`;
	});
});

// Intersection Observer for fade-in animations
const observerOptions = {
	threshold: 0.1,
	rootMargin: '0px 0px -100px 0px'
};

const observer = new IntersectionObserver((entries) => {
	entries.forEach(entry => {
		if (entry.isIntersecting) {
			entry.target.style.opacity = '1';
			entry.target.style.transform = 'translateY(0)';
		}
	});
}, observerOptions);

// Observe all sections
document.querySelectorAll('section').forEach(section => {
	section.style.opacity = '0';
	section.style.transform = 'translateY(50px)';
	section.style.transition = 'all 0.8s ease-out';
	observer.observe(section);
});
</script>
