---
import Layout from '../layouts/Layout.astro';
---

<Layout title="Ø¨Ø§Øº Ø¢ÛŒÙ†Ø¯Ù‡ - Bagh-e Ayandeh | Future Garden">
  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  
  <style>
    #map {
      height: 600px;
      width: 100%;
      border-radius: 12px;
      box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1);
      border: 4px solid white;
    }
    
    .leaflet-container {
      font-family: 'Vazirmatn', system-ui, sans-serif !important;
    }
  </style>

  <div class="min-h-screen" x-data="{ lang: 'fa' }">
    <!-- Navigation -->
    <nav class="bg-white/80 backdrop-blur-sm shadow-md sticky top-0 z-50">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center h-16">
          <div class="flex items-center space-x-8" :class="{ 'space-x-reverse': lang === 'fa' }">
            <h1 class="text-2xl font-bold bg-gradient-to-r from-persian-green-600 via-persian-turquoise-600 to-persian-gold-600 bg-clip-text text-transparent">
              <span x-show="lang === 'fa'">Ø¨Ø§Øº Ø¢ÛŒÙ†Ø¯Ù‡</span>
              <span x-show="lang === 'en'">Bagh-e Ayandeh</span>
            </h1>
            <span class="text-sm text-gray-600">
              <span x-show="lang === 'fa'">Future Garden</span>
              <span x-show="lang === 'en'">Ø¨Ø§Øº Ø¢ÛŒÙ†Ø¯Ù‡</span>
            </span>
          </div>
          
          <div class="flex items-center space-x-6" :class="{ 'space-x-reverse': lang === 'fa' }">
            <button 
              @click="lang = lang === 'fa' ? 'en' : 'fa'; document.documentElement.setAttribute('dir', lang === 'fa' ? 'rtl' : 'ltr')"
              class="px-4 py-2 text-sm bg-persian-gold-500 text-white rounded-lg hover:bg-persian-gold-600 transition"
            >
              <span x-show="lang === 'fa'">EN</span>
              <span x-show="lang === 'en'">ÙØ§</span>
            </button>
          </div>
        </div>
      </div>
    </nav>

    <!-- Hero Section -->
    <section class="relative py-8 px-4 bg-gradient-to-br from-persian-green-50 via-persian-turquoise-50 to-persian-gold-50">
      <div class="max-w-6xl mx-auto text-center">
        <div class="mb-4 inline-block">
          <div class="text-5xl mb-2">ğŸŒ±</div>
        </div>
        
        <h1 class="text-4xl md:text-6xl font-bold mb-3 leading-tight">
          <span class="bg-gradient-to-r from-persian-green-600 via-persian-turquoise-600 to-persian-gold-600 bg-clip-text text-transparent">
            <span x-show="lang === 'fa'">Ø¨Ø§Øº Ø¢ÛŒÙ†Ø¯Ù‡</span>
            <span x-show="lang === 'en'">Future Garden</span>
          </span>
        </h1>
        
        <p class="text-xl md:text-2xl text-gray-700 mb-3">
          <span x-show="lang === 'fa'">Ø§Ù…ÛŒØ¯ÛŒ Ø¨Ø±Ø§ÛŒ Ø§ÛŒØ±Ø§Ù† Ø¢Ø²Ø§Ø¯</span>
          <span x-show="lang === 'en'">A Vision of Hope for a Free Iran</span>
        </p>
        
        <div class="max-w-3xl mx-auto mb-6" :class="{ 'text-right': lang === 'fa', 'text-left': lang === 'en' }">
          <p class="text-gray-600 leading-relaxed text-sm md:text-base">
            <span x-show="lang === 'fa'">Ù…Ø§ Ø§Ø² Ø§ÛŒÙ† ÙØ±Ø¶ Ø¢ØºØ§Ø² Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ… Ú©Ù‡ Ø¯ÛŒÚ©ØªØ§ØªÙˆØ±ÛŒ Ø³Ù‚ÙˆØ· Ú©Ø±Ø¯Ù‡ Ùˆ Ù…Ø±Ø¯Ù… Ø¢Ø²Ø§Ø¯ÛŒ Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ø§Ø²ÛŒØ§ÙØªÙ‡â€ŒØ§Ù†Ø¯. Ø§ÛŒÙ† ÙˆØ¨Ø³Ø§ÛŒØª Ù†Ù‚Ø´Ù‡ Ø±Ø§Ù‡ÛŒ Ø§Ø³Øª Ø¨Ø±Ø§ÛŒ Ø³Ø§Ø®ØªÙ† Ø§ÛŒØ±Ø§Ù†ÛŒ Ø²ÛŒØ¨Ø§ØŒ Ù¾Ø§ÛŒØ¯Ø§Ø± Ùˆ Ø§Ù…ÛŒØ¯ÙˆØ§Ø±Ú©Ù†Ù†Ø¯Ù‡.</span>
            <span x-show="lang === 'en'">We start from the premise that dictatorship has fallen and people have reclaimed their freedom. This website is a roadmap for building a beautiful, sustainable, and hopeful Iran.</span>
          </p>
        </div>
      </div>
    </section>

    <!-- Map Section -->
    <section class="py-8 px-4">
      <div class="max-w-7xl mx-auto">
        <h2 class="text-3xl md:text-4xl font-bold text-center mb-3 text-gray-800">
          <span x-show="lang === 'fa'">Ú©Ø¬Ø§ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø´Ø±ÙˆØ¹ Ú©Ù†ÛŒØ¯ØŸ</span>
          <span x-show="lang === 'en'">Where would you like to start?</span>
        </h2>
        <p class="text-center text-gray-600 mb-6">
          <span x-show="lang === 'fa'">Ø±ÙˆÛŒ Ù‡Ø± Ø´Ù‡Ø± Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯ ØªØ§ Ø±Ø§Ù‡â€ŒØ­Ù„â€ŒÙ‡Ø§ÛŒ Ù…Ù†Ø·Ù‚Ù‡â€ŒØ§ÛŒ Ø±Ø§ Ø¨Ø¨ÛŒÙ†ÛŒØ¯</span>
          <span x-show="lang === 'en'">Click on any city to explore regional solutions</span>
        </p>
        
        <!-- Map Container -->
        <div id="map"></div>

        <!-- Legend -->
        <div class="mt-6 flex flex-wrap justify-center gap-6 text-sm">
          <div class="flex items-center gap-2">
            <div style="width: 16px; height: 16px; border-radius: 50%; background: #0ea5e9; border: 3px solid white; box-shadow: 0 2px 8px rgba(0,0,0,0.3);"></div>
            <span class="text-gray-700">
              <span x-show="lang === 'fa'">Ø¯Ø± Ø¯Ø³ØªØ±Ø³</span>
              <span x-show="lang === 'en'">Available now</span>
            </span>
          </div>
          <div class="flex items-center gap-2">
            <div style="width: 16px; height: 16px; border-radius: 50%; background: #9ca3af; border: 3px solid white; box-shadow: 0 2px 8px rgba(0,0,0,0.2);"></div>
            <span class="text-gray-600">
              <span x-show="lang === 'fa'">Ø¨Ù‡ Ø²ÙˆØ¯ÛŒ</span>
              <span x-show="lang === 'en'">Coming soon</span>
            </span>
          </div>
        </div>
      </div>
    </section>

    <!-- Hafez Quote -->
    <section class="py-16 px-4 bg-gradient-to-r from-persian-turquoise-600 to-persian-green-600">
      <div class="max-w-4xl mx-auto text-center text-white">
        <p class="text-2xl md:text-3xl font-bold mb-4 leading-relaxed">
          <span x-show="lang === 'fa'">Â«Ø§Ú¯Ø± Ø¨Ù‡ Ø¯Ù„ Ù…ÛŒâ€ŒÙ†Ø´ÛŒÙ†ÛŒØŒ Ø¯Ù†ÛŒØ§ Ù‡Ù…Ù‡ Ø§Ø² Ø¢Ù† ØªÙˆØ³ØªÂ»</span>
          <span x-show="lang === 'en'">"If you seek in the heart, the whole world is yours"</span>
        </p>
        <p class="text-lg md:text-xl opacity-90">
          <span x-show="lang === 'fa'">Ø­Ø§ÙØ¸ Ø´ÛŒØ±Ø§Ø²ÛŒ</span>
          <span x-show="lang === 'en'">Hafez of Shiraz</span>
        </p>
      </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-12 px-4">
      <div class="max-w-6xl mx-auto text-center">
        <h3 class="text-2xl font-bold mb-4">Ø¨Ø§Øº Ø¢ÛŒÙ†Ø¯Ù‡ - Bagh-e Ayandeh</h3>
        <p class="text-gray-400 mb-6">
          <span x-show="lang === 'fa'">Ù¾Ø±ÙˆÚ˜Ù‡â€ŒØ§ÛŒ Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ Ø¨Ø§ Ø¹Ø´Ù‚ Ø¨Ø±Ø§ÛŒ Ø§ÛŒØ±Ø§Ù† ğŸ‡®ğŸ‡·â¤ï¸</span>
          <span x-show="lang === 'en'">A family project with love for Iran ğŸ‡®ğŸ‡·â¤ï¸</span>
        </p>
        <p class="text-sm text-gray-500">Open source â€¢ Built with hope â€¢ For a free Iran</p>
      </div>
    </footer>
  </div>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <!-- Map Initialization -->
  <script>
    // Wait for everything to load
    window.addEventListener('load', function() {
      // Initialize map centered on Iran
      const map = L.map('map', {
        center: [32.4279, 53.6880],
        zoom: 6,
        zoomControl: true,
        scrollWheelZoom: true
      });

      // Add OpenStreetMap tiles
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: 'Â© OpenStreetMap contributors',
        maxZoom: 18,
      }).addTo(map);

      // Custom icon for available cities
      const availableIcon = L.divIcon({
        className: 'custom-marker',
        html: '<div style="background: #0ea5e9; width: 24px; height: 24px; border-radius: 50%; border: 3px solid white; box-shadow: 0 2px 8px rgba(0,0,0,0.3);"></div>',
        iconSize: [24, 24],
        iconAnchor: [12, 12]
      });

      // Custom icon for coming soon cities
      const comingSoonIcon = L.divIcon({
        className: 'custom-marker',
        html: '<div style="background: #9ca3af; width: 20px; height: 20px; border-radius: 50%; border: 3px solid white; box-shadow: 0 2px 8px rgba(0,0,0,0.2);"></div>',
        iconSize: [20, 20],
        iconAnchor: [10, 10]
      });

      // Get base path
      const basePath = window.location.pathname.includes('Bagh-e-Ayandeh') ? '/Bagh-e-Ayandeh' : '';

      // Cities data
      const cities = [
        {
          name: 'Ø´ÛŒØ±Ø§Ø² â€¢ Shiraz',
          coords: [29.5918, 52.5836],
          available: true,
          url: basePath + '/shiraz',
          description: 'ğŸ›ï¸ Birthplace of Hafez & Saadi'
        },
        {
          name: 'ØªÙ‡Ø±Ø§Ù† â€¢ Tehran',
          coords: [35.6892, 51.3890],
          available: false,
          description: 'ğŸ™ï¸ Capital (coming soon)'
        },
        {
          name: 'Ø§ØµÙÙ‡Ø§Ù† â€¢ Isfahan',
          coords: [32.6546, 51.6680],
          available: false,
          description: 'ğŸ•Œ Half of the World (coming soon)'
        },
        {
          name: 'ØªØ¨Ø±ÛŒØ² â€¢ Tabriz',
          coords: [38.0962, 46.2738],
          available: false,
          description: 'ğŸ”ï¸ Historic city (coming soon)'
        },
        {
          name: 'Ù…Ø´Ù‡Ø¯ â€¢ Mashhad',
          coords: [36.2605, 59.6168],
          available: false,
          description: 'ğŸ•Œ Spiritual center (coming soon)'
        }
      ];

      // Add markers for each city
      cities.forEach(city => {
        const marker = L.marker(city.coords, {
          icon: city.available ? availableIcon : comingSoonIcon
        }).addTo(map);

        // Popup content
        const popupContent = `
          <div style="text-align: center; font-family: 'Vazirmatn', sans-serif; min-width: 180px;">
            <strong style="font-size: 16px; display: block; margin-bottom: 8px;">${city.name}</strong>
            <p style="font-size: 13px; color: #666; margin: 4px 0;">${city.description}</p>
            ${city.available ? 
              `<button onclick="window.location.href='${city.url}'" style="margin-top: 8px; padding: 8px 16px; background: linear-gradient(to right, #059669, #0ea5e9); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 13px;">Explore â†’</button>` :
              '<span style="font-size: 12px; color: #999;">Coming soon...</span>'
            }
          </div>
        `;

        marker.bindPopup(popupContent);

        // Click handler for available cities
        if (city.available) {
          marker.on('click', function() {
            marker.openPopup();
          });
        }
      });

      // Force map to resize properly
      setTimeout(function() {
        map.invalidateSize();
      }, 100);
    });
  </script>

  <!-- Alpine.js for language switching -->
  <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
</Layout>
